<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=0.9" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.0/css/all.min.css"
      integrity="sha384-/o6I2CkkWC//PSjvWC/eYN7l3xM3tJm8ZzVkCOfp//W05QcE3mlGskpoHB6XqI+B"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="science.css" />

    <title>ScienceHub</title>
    <link
      id="favicon"
      rel="icon"
      href="https://cdn.glitch.global/52f82ec9-b05d-4ad0-a376-3a11302b6679/favicon.ico?v=1746799565019"
      type="image/x-icon"
    />
  
  </head>

  <body>
    <div class="background"></div>
    <div class="content">
      <div class="Hotbg">
        <input
          type="text"
          id="quer"
          name=""
          class="Hotbg-txt"
          placeholder="Search..."
          autocomplete="off"
        />
        <div href="#" id="startBtn" class="Hotbg-btn">
          <i id="a" class="fa fa-microphone"> </i>
        </div>
        <!--<img style="background-color: hsl(0, 0%, 90%);transition: background-color 300ms;" src="https://img-new.cgtrader.com/items/3516510/2b3549bd2b/hydrogen-chemical-element-v1-002-3d-model-2b3549bd2b.jpg" width="399" height="399">-->
      </div>
      <p id="typedText"></p>
      <div id="message">
        <div id="suggestionsContainer">
        <div id="suggestions-name"></div>
<div id="suggestions-symbol"></div>
<div id="suggestions-number"></div>
<div id="suggestions-discoverer"></div>
        </div>
      </div>
      <!-- For 'Did you mean:' -->

      <!-- For buttons -->

      <div id="tableDiv"></div>
    </div>
  </body>
  <script>
    // Save values when leaving or refreshing the page
    window.addEventListener("beforeunload", () => {
      localStorage.setItem("querValue", document.getElementById("quer").value);
      localStorage.setItem(
        "messageContent",
        document.getElementById("message").innerHTML
      );
      localStorage.setItem("title", document.title);
      localStorage.setItem(
        "typedTextContent",
        document.getElementById("typedText").innerHTML
      );
      localStorage.setItem(
        "tableDivContent",
        document.getElementById("tableDiv").innerHTML
      );
    });
  </script>

  <script type="text/javascript" defer>
    const startBtn = document.getElementById("startBtn");
    const messageDiv = document.getElementById("message");
    // Your code here
    const userLang = navigator.language || navigator.userLanguage; // e.g., "fr-FR"

    document.getElementById("quer").addEventListener("input", function () {
      const value = this.value.trim();
      const icon = document.getElementById("a");

      // If the input length is greater than 0, change to search icon and onclick to search function
      if (document.getElementById("quer").value.length > 0) {
        icon.classList.remove("fa-microphone");
        icon.classList.add("fa-search");

        document.getElementById("message").style.display = "block";
        // Change onclick to search function
      }
      // If the input is empty, change to microphone icon and onclick to microphone function
      else {
        icon.classList.remove("fa-search");
        icon.classList.add("fa-microphone");
        // Change onclick to microphone function
      }
    });

    function saveValues() {
      const queryValue = document.getElementById("quer").value;
      const tableDivContent = document.getElementById("tableDiv").innerHTML;
      const messageContent = document.getElementById("message").innerHTML;

      localStorage.setItem("queryValue", queryValue);
      localStorage.setItem("tableDivContent", tableDivContent);
      localStorage.setItem("messageContent", messageContent);
    }

    let recognition;
    let isRecognizing = false;

    if ("SpeechRecognition" in window || "webkitSpeechRecognition" in window) {
      recognition = new (window.SpeechRecognition ||
        window.webkitSpeechRecognition)();
      recognition.lang = "en-US";
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript.trim();
        document.getElementById("quer").value = transcript;
        gone();
      };
    } else {
      alert("Your browser does not support Speech Recognition.");
    }

    recognition.onerror = (event) => {
      console.error("Speech recognition error:", event.error);
    };

    recognition.onend = () => {
      isRecognizing = false;
    };

    function microphone() {
      i = 1;
      const output = document.getElementById("quer");
      const icon = document.getElementById("a");
      output.innerHTML = "";
      if (!isRecognizing) {
        recognition.start();
        isRecognizing = true;
        icon.classList.remove("fa-microphone");
        icon.classList.add("fa-stop");
        // You can add feedback to the user that recognition has started
        messageDiv.innerHTML = "";
      } else {
        recognition.stop();
        isRecognizing = false;
        icon.classList.remove("fa-stop");
        icon.classList.add("fa-microphone");
        messageDiv.innerHTML = "Listening...";
      }
    }
    const searchBox = document.getElementById("quer");
    let periodicTable = [
   {
    "atomic_number": 1,
    "name": "Hydrogen",
    "symbol": "H",
    "atomic_mass": 1.008,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s1"
  },
  {
    "atomic_number": 2,
    "name": "Helium",
    "symbol": "He",
    "atomic_mass": 4.0026,
    "discovery_year": 1895,
    "discoverer": "William Ramsay",
    "electron_configuration": "1s2"
  },
  {
    "atomic_number": 3,
    "name": "Lithium",
    "symbol": "Li",
    "atomic_mass": 6.94,
    "discovery_year": 1817,
    "discoverer": "Johan August Arfvedson",
    "electron_configuration": "1s2 2s1"
  },
  {
    "atomic_number": 4,
    "name": "Beryllium",
    "symbol": "Be",
    "atomic_mass": 9.0122,
    "discovery_year": 1798,
    "discoverer": "Louis-Nicolas Vauquelin",
    "electron_configuration": "1s2 2s2"
  },
  {
    "atomic_number": 5,
    "name": "Boron",
    "symbol": "B",
    "atomic_mass": 10.81,
    "discovery_year": 1808,
    "discoverer": "Joseph Louis Gay-Lussac, Louis Jacques Thénard",
    "electron_configuration": "1s2 2s2 2p1"
  },
  {
    "atomic_number": 6,
    "name": "Carbon",
    "symbol": "C",
    "atomic_mass": 12.011,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p2"
  },
  {
    "atomic_number": 7,
    "name": "Nitrogen",
    "symbol": "N",
    "atomic_mass": 14.007,
    "discovery_year": 1772,
    "discoverer": "Daniel Rutherford",
    "electron_configuration": "1s2 2s2 2p3"
  },
  {
    "atomic_number": 8,
    "name": "Oxygen",
    "symbol": "O",
    "atomic_mass": 15.999,
    "discovery_year": 1774,
    "discoverer": "Joseph Priestley, Carl Wilhelm Scheele",
    "electron_configuration": "1s2 2s2 2p4"
  },
  {
    "atomic_number": 9,
    "name": "Fluorine",
    "symbol": "F",
    "atomic_mass": 18.998,
    "discovery_year": 1886,
    "discoverer": "Henri Moissan",
    "electron_configuration": "1s2 2s2 2p5"
  },
  {
    "atomic_number": 10,
    "name": "Neon",
    "symbol": "Ne",
    "atomic_mass": 20.180,
    "discovery_year": 1898,
    "discoverer": "William Ramsay, Morris Travers",
    "electron_configuration": "1s2 2s2 2p6"
  },
  {
    "atomic_number": 11,
    "name": "Sodium",
    "symbol": "Na",
    "atomic_mass": 22.990,
    "discovery_year": 1807,
    "discoverer": "Humphry Davy",
    "electron_configuration": "1s2 2s2 2p6 3s1"
  },
  {
    "atomic_number": 12,
    "name": "Magnesium",
    "symbol": "Mg",
    "atomic_mass": 24.305,
    "discovery_year": 1808,
    "discoverer": "Sir Humphry Davy",
    "electron_configuration": "1s2 2s2 2p6 3s2"
  },
  {
    "atomic_number": 13,
    "name": "Aluminum",
    "symbol": "Al",
    "atomic_mass": 26.982,
    "discovery_year": 1825,
    "discoverer": "Hans Christian Ørsted",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p1"
  },
  {
    "atomic_number": 14,
    "name": "Silicon",
    "symbol": "Si",
    "atomic_mass": 28.085,
    "discovery_year": 1824,
    "discoverer": "Jöns Jacob Berzelius",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p2"
  },
  {
    "atomic_number": 15,
    "name": "Phosphorus",
    "symbol": "P",
    "atomic_mass": 30.974,
    "discovery_year": 1669,
    "discoverer": "Hennig Brand",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p3"
  },
  {
    "atomic_number": 16,
    "name": "Sulfur",
    "symbol": "S",
    "atomic_mass": 32.06,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p4"
  },
  {
    "atomic_number": 17,
    "name": "Chlorine",
    "symbol": "Cl",
    "atomic_mass": 35.45,
    "discovery_year": 1774,
    "discoverer": "Carl Wilhelm Scheele",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p5"
  },
  {
    "atomic_number": 18,
    "name": "Argon",
    "symbol": "Ar",
    "atomic_mass": 39.948,
    "discovery_year": 1894,
    "discoverer": "Lord Rayleigh, William Ramsay",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6"
  },
  {
    "atomic_number": 19,
    "name": "Potassium",
    "symbol": "K",
    "atomic_mass": 39.098,
    "discovery_year": 1807,
    "discoverer": "Humphry Davy",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 4s1"
  },
  {
    "atomic_number": 20,
    "name": "Calcium",
    "symbol": "Ca",
    "atomic_mass": 40.078,
    "discovery_year": 1808,
    "discoverer": "Sir Humphry Davy",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 4s2"
  },
  {
    "atomic_number": 21,
    "name": "Scandium",
    "symbol": "Sc",
    "atomic_mass": 44.956,
    "discovery_year": 1879,
    "discoverer": "Lars Fredrik Nilson",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d1 4s2"
  },
  {
    "atomic_number": 22,
    "name": "Titanium",
    "symbol": "Ti",
    "atomic_mass": 47.867,
    "discovery_year": 1791,
    "discoverer": "William Gregor",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d2 4s2"
  },
  {
    "atomic_number": 23,
    "name": "Vanadium",
    "symbol": "V",
    "atomic_mass": 50.942,
    "discovery_year": 1801,
    "discoverer": "Andrés Manuel del Río",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d3 4s2"
  },
  {
    "atomic_number": 24,
    "name": "Chromium",
    "symbol": "Cr",
    "atomic_mass": 52.00,
    "discovery_year": 1797,
    "discoverer": "Louis-Nicolas Vauquelin",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d5 4s1"
  },
  {
    "atomic_number": 25,
    "name": "Manganese",
    "symbol": "Mn",
    "atomic_mass": 54.938,
    "discovery_year": 1774,
    "discoverer": "Johann Gottlieb Gahn",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d5 4s2"
  },
  {
    "atomic_number": 26,
    "name": "Iron",
    "symbol": "Fe",
    "atomic_mass": 55.845,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d6 4s2"
  },
  {
    "atomic_number": 27,
    "name": "Cobalt",
    "symbol": "Co",
    "atomic_mass": 58.933,
    "discovery_year": 1735,
    "discoverer": "Georg Brandt",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d7 4s2"
  },
  {
    "atomic_number": 28,
    "name": "Nickel",
    "symbol": "Ni",
    "atomic_mass": 58.693,
    "discovery_year": 1751,
    "discoverer": "Axel Fredrik Cronstedt",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d8 4s2"
  },
  {
    "atomic_number": 29,
    "name": "Copper",
    "symbol": "Cu",
    "atomic_mass": 63.546,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s1"
  },
  {
    "atomic_number": 30,
    "name": "Zinc",
    "symbol": "Zn",
    "atomic_mass": 65.38,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2"
  },
  {
    "atomic_number": 31,
    "name": "Gallium",
    "symbol": "Ga",
    "atomic_mass": 69.723,
    "discovery_year": 1875,
    "discoverer": "Paul-Émile Lecoq de Boisbaudran",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p1"
  },
  {
    "atomic_number": 32,
    "name": "Germanium",
    "symbol": "Ge",
    "atomic_mass": 72.63,
    "discovery_year": 1886,
    "discoverer": "Clemens Winkler",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p2"
  },
  {
    "atomic_number": 33,
    "name": "Arsenic",
    "symbol": "As",
    "atomic_mass": 74.922,
    "discovery_year": "Ancient",
    "discoverer": "Known to ancient civilizations",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p3"
  },
  {
    "atomic_number": 34,
    "name": "Selenium",
    "symbol": "Se",
    "atomic_mass": 78.971,
    "discovery_year": 1817,
    "discoverer": "Jöns Jacob Berzelius",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p4"
  },
  {
    "atomic_number": 35,
    "name": "Bromine",
    "symbol": "Br",
    "atomic_mass": 79.904,
    "discovery_year": 1826,
    "discoverer": "Antoine Jérôme Balard",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p5"
  },
  {
    "atomic_number": 36,
    "name": "Krypton",
    "symbol": "Kr",
    "atomic_mass": 83.798,
    "discovery_year": 1898,
    "discoverer": "William Ramsay, Morris Travers",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
  },
  {
    "atomic_number": 37,
    "name": "Rubidium",
    "symbol": "Rb",
    "atomic_mass": 85.468,
    "discovery_year": 1861,
    "discoverer": "Robert Bunsen, Gustav Kirchhoff",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 5s1"
  },
  {
    "atomic_number": 38,
    "name": "Strontium",
    "symbol": "Sr",
    "atomic_mass": 87.62,
    "discovery_year": 1808,
    "discoverer": "Sir Humphry Davy",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 4s2 4p6"
  },
  {
    "atomic_number": 39,
    "name": "Yttrium",
    "symbol": "Y",
    "atomic_mass": 88.905,
    "discovery_year": 1794,
    "discoverer": "Johan Gadolin",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
  },
  {
    "atomic_number": 40,
    "name": "Zirconium",
    "symbol": "Zr",
    "atomic_mass": 91.224,
    "discovery_year": 1789,
    "discoverer": "Martin Heinrich Klaproth",
    "electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
  },
  {
    "atomic_number": 41,
    "name": "Niobium",
    "symbol": "Nb",
    "atomic_mass": 92.906,
    "discovery_year": 1801,
    "discoverer": "Charles Hatchett",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 42,
"name": "Molybdenum",
"symbol": "Mo",
"atomic_mass": 95.95,
"discovery_year": 1778,
"discoverer": "Carl Wilhelm Scheele",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 43,
"name": "Technetium",
"symbol": "Tc",
"atomic_mass": 98,
"discovery_year": 1937,
"discoverer": "Carlo Perrier, Emilio Segrè",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 44,
"name": "Ruthenium",
"symbol": "Ru",
"atomic_mass": 101.07,
"discovery_year": 1844,
"discoverer": "Karl Ernst Claus",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 45,
"name": "Rhodium",
"symbol": "Rh",
"atomic_mass": 102.91,
"discovery_year": 1803,
"discoverer": "William Hyde Wollaston",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 46,
"name": "Palladium",
"symbol": "Pd",
"atomic_mass": 106.42,
"discovery_year": 1803,
"discoverer": "William Hyde Wollaston",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 47,
"name": "Silver",
"symbol": "Ag",
"atomic_mass": 107.87,
"discovery_year": "Ancient",
"discoverer": "Known to ancient civilizations",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 48,
"name": "Cadmium",
"symbol": "Cd",
"atomic_mass": 112.41,
"discovery_year": 1817,
"discoverer": "Friedrich Stromeyer",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 49,
"name": "Indium",
"symbol": "In",
"atomic_mass": 114.82,
"discovery_year": 1863,
"discoverer": "Ferdinand Reich, Hieronymous Theodor Richter",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 50,
"name": "Tin",
"symbol": "Sn",
"atomic_mass": 118.71,
"discovery_year": "Ancient",
"discoverer": "Known to ancient civilizations",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 51,
"name": "Antimony",
"symbol": "Sb",
"atomic_mass": 121.76,
"discovery_year": "Ancient",
"discoverer": "Known to ancient civilizations",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 52,
"name": "Tellurium",
"symbol": "Te",
"atomic_mass": 127.60,
"discovery_year": 1782,
"discoverer": "Franz-Joseph Müller von Reichenstein",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 53,
"name": "Iodine",
"symbol": "I",
"atomic_mass": 126.90,
"discovery_year": 1811,
"discoverer": "Bernard Courtois",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6"
},
{
"atomic_number": 54,
"name": "Xenon",
"symbol": "Xe",
"atomic_mass": 131.29,
"discovery_year": 1898,
"discoverer": "William Ramsay, Morris Travers",
"electron_configuration": "1s2 2s2 2p6 3s2 3p6 3d10 4s2 4p6 4d10 5s2 5p6"
},  {
    "atomic_number": 55,
    "name": "Cesium",
    "symbol": "Cs",
    "atomic_mass": 132.9055,
    "discovery_year": 1860,
    "discoverer": "Robert Bunsen and Gustav Kirchhoff",
    "electron_configuration": "[Xe] 6s^1"
  },
  {
    "atomic_number": 56,
    "name": "Barium",
    "symbol": "Ba",
    "atomic_mass": 137.327,
    "discovery_year": 1808,
    "discoverer": "Humphry Davy",
    "electron_configuration": "[Xe] 6s^2"
  },
  {
    "atomic_number": 57,
    "name": "Lanthanum",
    "symbol": "La",
    "atomic_mass": 138.9055,
    "discovery_year": 1839,
    "discoverer": "Carl Gustaf Mosander",
    "electron_configuration": "[Xe] 5d^1 6s^2"
  },
  {
    "atomic_number": 58,
    "name": "Cerium",
    "symbol": "Ce",
    "atomic_mass": 140.116,
    "discovery_year": 1803,
    "discoverer": "Martin Heinrich Klaproth",
    "electron_configuration": "[Xe] 4f^1 5d^1 6s^2"
  },
  {
    "atomic_number": 59,
    "name": "Praseodymium",
    "symbol": "Pr",
    "atomic_mass": 140.9077,
    "discovery_year": 1885,
    "discoverer": "Carl Auer von Welsbach",
    "electron_configuration": "[Xe] 4f^3 6s^2"
  },
  {
    "atomic_number": 60,
    "name": "Neodymium",
    "symbol": "Nd",
    "atomic_mass": 144.242,
    "discovery_year": 1885,
    "discoverer": "Carl Auer von Welsbach",
    "electron_configuration": "[Xe] 4f^4 6s^2"
  },
  {
    "atomic_number": 61,
    "name": "Promethium",
    "symbol": "Pm",
    "atomic_mass": 145,
    "discovery_year": 1945,
    "discoverer": "Joliet-Curie and Chien-Shiung Wu",
    "electron_configuration": "[Xe] 4f^5 6s^2"
  },
  {
    "atomic_number": 62,
    "name": "Samarium",
    "symbol": "Sm",
    "atomic_mass": 150.36,
    "discovery_year": 1879,
    "discoverer": "Lecoq de Boisbaudran",
    "electron_configuration": "[Xe] 4f^6 6s^2"
  },
  {
    "atomic_number": 63,
    "name": "Europium",
    "symbol": "Eu",
    "atomic_mass": 151.964,
    "discovery_year": 1901,
    "discoverer": "Eugène-Anatole Demarçay",
    "electron_configuration": "[Xe] 4f^7 6s^2"
  },
  {
    "atomic_number": 64,
    "name": "Gadolinium",
    "symbol": "Gd",
    "atomic_mass": 157.25,
    "discovery_year": 1880,
    "discoverer": "Jean Charles Galissard de Marignac",
    "electron_configuration": "[Xe] 4f^7 5d^1 6s^2"
  },
  {
    "atomic_number": 65,
    "name": "Terbium",
    "symbol": "Tb",
    "atomic_mass": 158.9253,
    "discovery_year": 1843,
    "discoverer": "Carl Gustaf Mosander",
    "electron_configuration": "[Xe] 4f^9 6s^2"
  },
  {
    "atomic_number": 66,
    "name": "Dysprosium",
    "symbol": "Dy",
    "atomic_mass": 162.5,
    "discovery_year": 1886,
    "discoverer": "Paul Émile Lecoq de Boisbaudran",
    "electron_configuration": "[Xe] 4f^10 6s^2"
  },
  {
    "atomic_number": 67,
    "name": "Holmium",
    "symbol": "Ho",
    "atomic_mass": 164.9303,
    "discovery_year": 1878,
    "discoverer": "Per Theodor Cleve",
    "electron_configuration": "[Xe] 4f^11 6s^2"
  },
  {
    "atomic_number": 68,
    "name": "Erbium",
    "symbol": "Er",
    "atomic_mass": 167.259,
    "discovery_year": 1843,
    "discoverer": "Carl Gustaf Mosander",
    "electron_configuration": "[Xe] 4f^12 6s^2"
  },
  {
    "atomic_number": 69,
    "name": "Thulium",
    "symbol": "Tm",
    "atomic_mass": 168.9342,
    "discovery_year": 1879,
    "discoverer": "Per Theodor Cleve",
    "electron_configuration": "[Xe] 4f^13 6s^2"
  },
  {
    "atomic_number": 70,
    "name": "Ytterbium",
    "symbol": "Yb",
    "atomic_mass": 173.04,
    "discovery_year": 1878,
    "discoverer": "Carl Gustaf Mosander",
    "electron_configuration": "[Xe] 4f^14 6s^2"
  },
  {
    "atomic_number": 71,
    "name": "Lutetium",
    "symbol": "Lu",
    "atomic_mass": 174.967,
    "discovery_year": 1907,
    "discoverer": "Georg Charles de Hevesy and J. L. Holmes",
    "electron_configuration": "[Xe] 4f^14 5d^1 6s^2"
  },
  {
    "atomic_number": 72,
    "name": "Hafnium",
    "symbol": "Hf",
    "atomic_mass": 178.49,
    "discovery_year": 1923,
    "discoverer": "Niels Bohr and Otto Hahn",
    "electron_configuration": "[Xe] 4f^14 5d^2 6s^2"
  },
  {
    "atomic_number": 73,
    "name": "Tantalum",
    "symbol": "Ta",
    "atomic_mass": 180.9479,
    "discovery_year": 1802,
    "discoverer": "Charles Hatchett",
    "electron_configuration": "[Xe] 4f^14 5d^3 6s^2"
  },
  {
    "atomic_number": 74,
    "name": "Tungsten",
    "symbol": "W",
    "atomic_mass": 183.84,
    "discovery_year": 1783,
    "discoverer": "Juan José and Fausto Elhuyar",
    "electron_configuration": "[Xe] 4f^14 5d^4 6s^2"
  },
  {
    "atomic_number": 75,
    "name": "Rhenium",
    "symbol": "Re",
    "atomic_mass": 186.207,
    "discovery_year": 1925,
    "discoverer": "Otto Hahn and Melvin P. Smith",
    "electron_configuration": "[Xe] 4f^14 5d^5 6s^2"
  },
  {
    "atomic_number": 76,
    "name": "Osmium",
    "symbol": "Os",
    "atomic_mass": 190.23,
    "discovery_year": 1803,
    "discoverer": "Smithson Tennant",
    "electron_configuration": "[Xe] 4f^14 5d^6 6s^2"
  },
  {
    "atomic_number": 77,
    "name": "Iridium",
    "symbol": "Ir",
    "atomic_mass": 192.217,
    "discovery_year": 1803,
    "discoverer": "Smithson Tennant",
    "electron_configuration": "[Xe] 4f^14 5d^7 6s^2"
  },
  {
    "atomic_number": 78,
    "name": "Platinum",
    "symbol": "Pt",
    "atomic_mass": 195.084,
    "discovery_year": 1735,
    "discoverer": "Antonio de Ulloa",
    "electron_configuration": "[Xe] 4f^14 5d^9 6s^1"
  },
  {
    "atomic_number": 79,
    "name": "Gold",
    "symbol": "Au",
    "atomic_mass": 196.966569,
    "discovery_year": "Ancient",
    "discoverer": "Unknown",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^1"
  },
  {
    "atomic_number": 80,
    "name": "Mercury",
    "symbol": "Hg",
    "atomic_mass": 200.592,
    "discovery_year": "Ancient",
    "discoverer": "Unknown",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2"
  },
  {
    "atomic_number": 81,
    "name": "Thallium",
    "symbol": "Tl",
    "atomic_mass": 204.38,
    "discovery_year": 1861,
    "discoverer": "William Crookes",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^1"
  },
  {
    "atomic_number": 82,
    "name": "Lead",
    "symbol": "Pb",
    "atomic_mass": 207.2,
    "discovery_year": "Ancient",
    "discoverer": "Unknown",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^2"
  },
  {
    "atomic_number": 83,
    "name": "Bismuth",
    "symbol": "Bi",
    "atomic_mass": 208.9804,
    "discovery_year": 1753,
    "discoverer": "Claude-François Geoffroy",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^3"
  },
  {
    "atomic_number": 84,
    "name": "Polonium",
    "symbol": "Po",
    "atomic_mass": 209,
    "discovery_year": 1898,
    "discoverer": "Marie Curie and Pierre Curie",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^4"
  },
  {
    "atomic_number": 85,
    "name": "Astatine",
    "symbol": "At",
    "atomic_mass": 210,
    "discovery_year": 1940,
    "discoverer": "Dale R. Corson, Kenneth Ross MacKenzie, and Emilio Segrè",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^5"
  },
  {
    "atomic_number": 86,
    "name": "Radon",
    "symbol": "Rn",
    "atomic_mass": 222,
    "discovery_year": 1899,
    "discoverer": "Friedrich Otto Giesel",
    "electron_configuration": "[Xe] 4f^14 5d^10 6s^2 6p^6"
  },
  {
    "atomic_number": 87,
    "name": "Francium",
    "symbol": "Fr",
    "atomic_mass": 223,
    "discovery_year": 1939,
    "discoverer": "Marguerite Perey",
    "electron_configuration": "[Rn] 7s^1"
  },
  {
    "atomic_number": 88,
    "name": "Radium",
    "symbol": "Ra",
    "atomic_mass": 226,
    "discovery_year": 1898,
    "discoverer": "Marie Curie and Pierre Curie",
    "electron_configuration": "[Rn] 7s^2"
  },
  {
    "atomic_number": 89,
    "name": "Actinium",
    "symbol": "Ac",
    "atomic_mass": 227,
    "discovery_year": 1899,
    "discoverer": "Friedrich Oskar Giesel",
    "electron_configuration": "[Rn] 6d^1 7s^2"
  },
  {
    "atomic_number": 90,
    "name": "Thorium",
    "symbol": "Th",
    "atomic_mass": 232.038,
    "discovery_year": 1828,
    "discoverer": "Jöns Jacob Berzelius",
    "electron_configuration": "[Rn] 6d^2 7s^2"
  },
  {
    "atomic_number": 91,
    "name": "Protactinium",
    "symbol": "Pa",
    "atomic_mass": 231.03588,
    "discovery_year": 1899,
    "discoverer": "Otto Hahn and Lise Meitner",
    "electron_configuration": "[Rn] 5f^2 6d^1 7s^2"
  },
  {
    "atomic_number": 92,
    "name": "Uranium",
    "symbol": "U",
    "atomic_mass": 238.0289,
    "discovery_year": 1789,
    "discoverer": "Martin Heinrich Klaproth",
    "electron_configuration": "[Rn] 5f^3 6d^1 7s^2"
  },
  {
    "atomic_number": 93,
    "name": "Neptunium",
    "symbol": "Np",
    "atomic_mass": 237,
    "discovery_year": 1940,
    "discoverer": "Glenn T. Seaborg, Arthur C. Wahl, and Joseph W. Kennedy",
    "electron_configuration": "[Rn] 5f^4 6d^1 7s^2"
  },
  {
    "atomic_number": 94,
    "name": "Plutonium",
    "symbol": "Pu",
    "atomic_mass": 244,
    "discovery_year": 1940,
    "discoverer": "Glenn T. Seaborg, Arthur C. Wahl, and Joseph W. Kennedy",
    "electron_configuration": "[Rn] 5f^6 6d^1 7s^2"
  },
  {
    "atomic_number": 95,
    "name": "Americium",
    "symbol": "Am",
    "atomic_mass": 243,
    "discovery_year": 1944,
    "discoverer": "Glenn T. Seaborg, Ralph A. James, and Albert Ghiorso",
    "electron_configuration": "[Rn] 5f^7 6s^2"
  },
  {
    "atomic_number": 96,
    "name": "Curium",
    "symbol": "Cm",
    "atomic_mass": 247,
    "discovery_year": 1944,
    "discoverer": "Glenn T. Seaborg, Albert Ghiorso, and Ralph A. James",
    "electron_configuration": "[Rn] 5f^7 6d^1 7s^2"
  },
  {
    "atomic_number": 97,
    "name": "Berkelium",
    "symbol": "Bk",
    "atomic_mass": 247,
    "discovery_year": 1949,
    "discoverer": "Glenn T. Seaborg and Albert Ghiorso",
    "electron_configuration": "[Rn] 5f^9 6s^2"
  },
  {
    "atomic_number": 98,
    "name": "Californium",
    "symbol": "Cf",
    "atomic_mass": 251,
    "discovery_year": 1950,
    "discoverer": "Glenn T. Seaborg, Albert Ghiorso, and Glenn Seaborg",
    "electron_configuration": "[Rn] 5f^10 6s^2"
  },
  {
    "atomic_number": 99,
    "name": "Einsteinium",
    "symbol": "Es",
    "atomic_mass": 252,
    "discovery_year": 1952,
    "discoverer": "Albert Ghiorso and Glenn Seaborg",
    "electron_configuration": "[Rn] 5f^11 6s^2"
  },
  {
    "atomic_number": 100,
    "name": "Fermium",
    "symbol": "Fm",
    "atomic_mass": 257,
    "discovery_year": 1952,
    "discoverer": "Albert Ghiorso, Glenn Seaborg, and others",
    "electron_configuration": "[Rn] 5f^12 6s^2"
  },
  {
    "atomic_number": 101,
    "name": "Mendelevium",
    "symbol": "Md",
    "atomic_mass": 258,
    "discovery_year": 1955,
    "discoverer": "Albert Ghiorso, Glenn Seaborg, and others",
    "electron_configuration": "[Rn] 5f^13 6s^2"
  },
  {
    "atomic_number": 102,
    "name": "Nobelium",
    "symbol": "No",
    "atomic_mass": 259,
    "discovery_year": 1958,
    "discoverer": "Albert Ghiorso, Glenn Seaborg, and others",
    "electron_configuration": "[Rn] 5f^14 6s^2"
  },
  {
    "atomic_number": 103,
    "name": "Lawrencium",
    "symbol": "Lr",
    "atomic_mass": 262,
    "discovery_year": 1961,
    "discoverer": "Albert Ghiorso, Glenn Seaborg, and others",
    "electron_configuration": "[Rn] 5f^14 6d^1 7s^2"
  },
  {
    "atomic_number": 104,
    "name": "Rutherfordium",
    "symbol": "Rf",
    "atomic_mass": 267,
    "discovery_year": 1964,
    "discoverer": "Joint Institute for Nuclear Research and Lawrence Berkeley National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^2 7s^2"
  },
  {
    "atomic_number": 105,
    "name": "Dubnium",
    "symbol": "Db",
    "atomic_mass": 270,
    "discovery_year": 1970,
    "discoverer": "Joint Institute for Nuclear Research and Lawrence Berkeley National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^3 7s^2"
  },
  {
    "atomic_number": 106,
    "name": "Seaborgium",
    "symbol": "Sg",
    "atomic_mass": 271,
    "discovery_year": 1974,
    "discoverer": "Joint Institute for Nuclear Research and Lawrence Berkeley National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^4 7s^2"
  },
  {
    "atomic_number": 107,
    "name": "Bohrium",
    "symbol": "Bh",
    "atomic_mass": 270,
    "discovery_year": 1981,
    "discoverer": "Joint Institute for Nuclear Research and Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^5 7s^2"
  },
  {
    "atomic_number": 108,
    "name": "Hassium",
    "symbol": "Hs",
    "atomic_mass": 277,
    "discovery_year": 1984,
    "discoverer": "Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^6 7s^2"
  },
  {
    "atomic_number": 109,
    "name": "Meitnerium",
    "symbol": "Mt",
    "atomic_mass": 278,
    "discovery_year": 1982,
    "discoverer": "Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^7 7s^2"
  },
  {
    "atomic_number": 110,
    "name": "Darmstadtium",
    "symbol": "Ds",
    "atomic_mass": 281,
    "discovery_year": 1994,
    "discoverer": "Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^9 7s^2"
  },
  {
    "atomic_number": 111,
    "name": "Roentgenium",
    "symbol": "Rg",
    "atomic_mass": 280,
    "discovery_year": 1994,
    "discoverer": "Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2"
  },
  {
    "atomic_number": 112,
    "name": "Copernicium",
    "symbol": "Cn",
    "atomic_mass": 285,
    "discovery_year": 1996,
    "discoverer": "Gesellschaft für Schwerionenforschung",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2"
  },
  {
    "atomic_number": 113,
    "name": "Nihonium",
    "symbol": "Nh",
    "atomic_mass": 284,
    "discovery_year": 2003,
    "discoverer": "RIKEN",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^1"
  },
  {
    "atomic_number": 114,
    "name": "Flerovium",
    "symbol": "Fl",
    "atomic_mass": 289,
    "discovery_year": 1998,
    "discoverer": "Joint Institute for Nuclear Research",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^2"
  },
  {
    "atomic_number": 115,
    "name": "Moscovium",
    "symbol": "Mc",
    "atomic_mass": 288,
    "discovery_year": 2004,
    "discoverer": "Joint Institute for Nuclear Research and Lawrence Livermore National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^3"
  },
  {
    "atomic_number": 116,
    "name": "Livermorium",
    "symbol": "Lv",
    "atomic_mass": 293,
    "discovery_year": 2000,
    "discoverer": "Joint Institute for Nuclear Research and Lawrence Livermore National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^4"
  },
  {
    "atomic_number": 117,
    "name": "Tennessine",
    "symbol": "Ts",
    "atomic_mass": 294,
    "discovery_year": 2010,
    "discoverer": "Joint Institute for Nuclear Research and Oak Ridge National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^5"
  },
  {
    "atomic_number": 118,
    "name": "Oganesson",
    "symbol": "Og",
    "atomic_mass": 294,
    "discovery_year": 2002,
    "discoverer": "Joint Institute for Nuclear Research (JINR) and Lawrence Livermore National Laboratory",
    "electron_configuration": "[Rn] 5f^14 6d^10 7s^2 7p^6"
  }
];


    const correctElementNames = periodicTable.map((el) =>
      el.name.toLowerCase()
    );

    // Levenshtein Distance Function
    function levenshtein(a, b) {
      const dp = Array.from({ length: a.length + 1 }, () => []);
      for (let i = 0; i <= a.length; i++) dp[i][0] = i;
      for (let j = 0; j <= b.length; j++) dp[0][j] = j;

      for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
          const cost = a[i - 1] === b[j - 1] ? 0 : 1;
          dp[i][j] = Math.min(
            dp[i - 1][j] + 1, // Deletion
            dp[i][j - 1] + 1, // Insertion
            dp[i - 1][j - 1] + cost // Substitution
          );
        }
      }
      return dp[a.length][b.length];
    }
    let i = 0;
    function typeText(element, text, delay = 30, callback = null) {
      if (!element) {
        console.error("typeText error: target element is null.");
        return;
      }

      let i = 0;
      element.innerHTML = ""; // Clear existing text

      const interval = setInterval(() => {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
        } else {
          clearInterval(interval);
          if (callback) callback();
        }
      }, delay);
    }

    function typeTextInElement(element, text, speed = 30) {
      let i = 0;
      if (i == 0) {
        element.textContent = ""; // Clear text
      }
      const interval = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(interval);
        }
      }, speed);
    }
let aa=0
function showSuggestions(suggestions) {
  document.getElementById("message").innerHTML = `<div id="suggestionsContainer"></div>`;
  const target = document.getElementById("suggestionsContainer");
  if (!target) {
    console.error("Error: #suggestionsContainer not found in the DOM.");
    return;
  }

  // Clear old suggestions

    console.log(aa)
    document.getElementById("suggestionsContainer").style.display = "block";


  suggestions.forEach(suggestion => {
    const button = document.createElement("button");
    button.textContent = suggestion;
    button.className = "suggestion-button";
console.log("Adding suggestion:", suggestion);

    button.addEventListener("click", function () {
      aa=aa+1
      document.getElementById("quer").value = suggestion;
      question(); // or gone()
    });

    target.appendChild(button);
  });
}


function estimateClosestByMass(input) {
  const num = parseFloat(input);
  if (isNaN(num)) return null;

  let closest = null;
  let minDiff = Infinity;

  for (const el of periodicTable) {
    const diff = Math.abs(el.atomic_mass - num);
    if (diff < minDiff) {
      minDiff = diff;
      closest = el;
    }
  }

  return closest;
}

function gone() {
  const typedText = document.getElementById("typedText");
  const inputBox = document.getElementById("quer");
  const userInput = inputBox.value.trim().toLowerCase();
  typedText.textContent = "";

  if (userInput === "") {
    typeText(messageDiv, "Please enter an element name, symbol, or number.");
    return;
  }

  const suggestions = [];
  const isNumber = !isNaN(userInput);
  const inputNumber = parseFloat(userInput);

  // Clear old suggestions container
  const suggestionsContainer = document.getElementById("suggestionsContainer");
// Clear previous suggestions

  for (const el of periodicTable) {
    const name = el.name?.toLowerCase();
    const symbol = el.symbol?.toLowerCase();
    const discoverer = el.discoverer?.toLowerCase();
    const atomicNumber = el.atomic_number;
    const atomicMass = el.atomic_mass;

    const fields = [name, symbol, discoverer];
    for (const field of fields) {
      if (field && field.includes(userInput)) {
        suggestions.push(el.name);
     console.log(field)
    }       
    }
  
   
    // Check numeric closeness
    if (isNumber) {
      // Try matching atomic number exactly first
      const byAtomicNumber = periodicTable.find(
        el => el.atomic_number === inputNumber
      )
      } 
const byAtomicNumber = periodicTable.find(
        el => el.atomic_number === inputNumber
      )
      if (byAtomicNumber) {
        typeText(typedText, `Atomic number match: ${byAtomicNumber.name}`, 30, () => {
          document.getElementById("quer").value = byAtomicNumber.name;
          question(); // Proceed with additional logic after match
        });
        return;
      }

      // If no exact atomic number match, estimate by closest atomic mass
      const closestMassMatch = estimateClosestByMass(inputNumber);

      if (closestMassMatch) {
        typeText(typedText, `Closest atomic mass match: ${closestMassMatch.name}`, 30, () => {
          document.getElementById("quer").value = closestMassMatch.name;
          question(); // Proceed with additional logic after match
        });
        return;
      }
    }
  

  // If there are any suggestions, show them
  if (suggestions.length > 0) {
    showSuggestions(suggestions); // Show the suggestion buttons
  } else {
    // If no suggestions, fall back to search function
    scearch();
  }
}




    A = 0;
    I = 0;

    function findElement(allElements, elementToSearch) {
      const lowerInput = elementToSearch.trim().toLowerCase();

      // Try to parse atomic number or mass
      const numberInput = parseFloat(lowerInput);

      const foundElement = allElements.find((item) => {
        return (
          item.name.toLowerCase() === lowerInput ||
          item.symbol.toLowerCase() === lowerInput || 
          item.atomic_number === numberInput ||
          item.atomic_mass === numberInput||
          item.discoverer.toLowerCase().includes(lowerInput)||
          item.discovery_year=== numberInput
        );
      });

      return foundElement;
    }
    async function getTitleFromGPT(queryText) {
      const apiKey =
        "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";

      // First, try to detect if it's an element
      const lowerQuery = queryText.toLowerCase();

      // Else, call GPT to generate a one-word title
      try {
        const response = await fetch(
          "https://openrouter.ai/api/v1/chat/completions",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              model: "openai/gpt-3.5-turbo",
              messages: [
                {
                  role: "system",
                  content:
                    `You are a strict assistant. Your job is to generate a **4-word sensible title**. ` +
                    `If the user query refers to a chemical element (e.g., bismuth, mercury), return exactly that name as the title. ` +
                    `Otherwise, generate a relevant 6-word title that is NOT generic or nonsense like "adventure" or "mystery". ` +
                    `If you don't understand the query, return the a answer which will fit in the title bar to query i give like a human would in the language the query is:${queryText}.` +
                    `i said  i asked after the last colon`,
                },
                { role: "user", content: queryText },
              ],
              max_tokens: 20,
              temperature: 0.5,
            }),
          }
        );

        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const data = await response.json();
        const result = data.choices[0].message.content.trim();

        // Ensure it’s only one word and not nonsense

        return result;
      } catch (err) {
        console.error(err.message);
        return "Untitled";
      }
    }

    const messages = [];

    async function scearch() {
      const question = document.getElementById("quer");
      const message = document.getElementById("message");
      document.getElementById("tableDiv").innerHTML = "";
      message.style.top = "50%";
      message.style.transform = `translate(-50%,-50%)`;
     document.getElementById("suggestionsContainer").innerHTML = "";
    
      const startBtn = document.getElementById("startBtn");
      const text = document.getElementById("quer").value.trim();
      if (!text) return;

      messages.push({ role: "user", content: text });
      if (text.length < 3) {
    display("GPT", "Query too short for GPT.", "error");
    return;
}

      display("You", text, "user");
      startBtn.value = "";
   //const apiKey="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"
     //const apiKey="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";
    const apiKey="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"
     
      const title = await getTitleFromGPT(text);
display("GPT", title, "bot"); // shows first GPT title

let titlep = "can you give short title for:" + title;
const t = await getTitleFromGPT(titlep);
display("GPT", t, "bot"); // shows final title (conversation output)

console.log("Conversation Title:", title);
typeDocumentTitle(t);

      }
    

    function display(who, text, cls) {
      const chat = document.getElementById("message");
      const div = document.createElement("div");
      div.className = `msg ${cls}`;

      const escapeHtml = (html) => {
        return html
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
      };

      // Regular expression to find code blocks
      const codeBlockRegex = /```(\w+)?\n([\s\S]*?)```/g;
      let lastIndex = 0;
      let normalParts = [];
      let codeParts = [];

      let match;
      while ((match = codeBlockRegex.exec(text)) !== null) {
        const [fullMatch, lang, code] = match;
        const before = text.slice(lastIndex, match.index);
        normalParts.push(before); // Add non-code part

        // Add code block and copy button
        codeParts.push({
          type: "code",
          html: `
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-${lang || "text"}">${escapeHtml(
            code
          )}</code></pre>
                </div>`,
        });

        lastIndex = match.index + fullMatch.length;
      }

      // Add the remaining text (after the last code block)
      const remaining = text.slice(lastIndex);
      normalParts.push(remaining);

      // Create the final HTML structure
      div.innerHTML = `
        <div class="typing-area" style="
            padding: 10px;
            background-color: ${cls === "user" ? "#dcf8c6" : "#2c2c2c"};
            border-radius: 10px;
            color: ${cls === "user" ? "#000" : "#fff"};
            max-width: 70%;
            margin: 10px auto;
            text-align: left;">
            <span class="typed-content"></span>
        </div>
    `;

      const container = div.querySelector(".typed-content");

      // Append the message block to the chat container
      chat.appendChild(div);

      // Type the content with a typing effect
      let i = 0,
        partIndex = 0;

      function typeNextChar() {
        if (partIndex >= normalParts.length) return;

        const currentPart = normalParts[partIndex];
        if (i < currentPart.length) {
          const char = currentPart.charAt(i);
          container.innerHTML += char === "\n" ? "<br>" : escapeHtml(char);
          i++;
          setTimeout(typeNextChar, 30); // Simulate typing effect
        } else {
          // If there's a code block, insert it after the text part
          const block = codeParts[partIndex];
          if (block && block.type === "code") {
            container.innerHTML += block.html;
          }

          partIndex++;
          i = 0;
          typeNextChar();
        }
      }

      typeNextChar();
    }

    // Function to copy code to clipboard
    function copyToClipboard(button) {
      const code = button.nextElementSibling?.textContent; // Get the code from the <code> element
      if (!code) {
        button.textContent = "Nothing to copy!";
        return;
      }

      // Attempt to copy the code content to the clipboard
      navigator.clipboard
        .writeText(code)
        .then(() => {
          button.textContent = "Copied!";
          setTimeout(() => (button.textContent = "Copy"), 2000); // Reset the button text after 2 seconds
        })
        .catch(() => {
          button.textContent = "Failed"; // Handle failure (if any)
        });
    }

    function typeDocumentTitle(text, delay = 70) {
      let i = 0;
      const interval = setInterval(() => {
        if (i < text.length) {
          document.title = text.slice(0, i + 1);
          i++;
        } else {
          clearInterval(interval);
        }
      }, delay);
    }
    function stripHtml(html) {
      let tmp = document.createElement("div");
      tmp.innerHTML = html;
      return tmp.textContent || tmp.innerText || "";
    }

    async function typeTableText(container, text, delay = 30) {
      container.textContent = ""; // Clear it
      for (let i = 0; i < text.length; i++) {
        container.textContent += text.charAt(i);
        await new Promise((res) => setTimeout(res, delay));
      }
    }

    // function escapeHtml(html) {
    // return html
    // .replace(/&/g, "&amp;")
    //  .replace(/</g, "&lt;")
    //  .replace(/>/g, "&gt;");
    //}

    async function objectToTable(data) {
      const icon = document.getElementById("a");
      const tableDiv = document.getElementById("tableDiv");

      const headers = Object.keys(data);
      const values = Object.values(data);

      const table = document.createElement("table");
      table.classList.add("styled-table");
      table.id = "table";

      const thead = document.createElement("thead");
      const trHead = document.createElement("tr");

      // Create header row with typing
      for (let header of headers) {
        const th = document.createElement("th");
        trHead.appendChild(th);
        await typeText(th, header, 100); // Typing effect
      }
      thead.appendChild(trHead);
      table.appendChild(thead);

      const tbody = document.createElement("tbody");
      const trBody = document.createElement("tr");

      // Create value row with typing
      for (let value of values) {
        const td = document.createElement("td");
        trBody.appendChild(td);
        await typeText(td, String(value), 100); // Typing effect
      }
      tbody.appendChild(trBody);
      table.appendChild(tbody);

      tableDiv.innerHTML = "";
      tableDiv.style.opacity = "1";
      tableDiv.appendChild(table);

      
      document.getElementById(
        "message"
      ).style.transform = `translate(-50%,-130%)`;
      tableDiv.style.transform = `translate(-50%,-60%)`;
      tableDiv.style.top = "60%";

      setTimeout(() => {
        icon.classList.remove("fa-stop");
        icon.classList.add("fa-microphone");
      }, 1500);
      // Save table HTML
const device = getDeviceType();
    if(device=="phone"){
      tableDiv.style.width="100%"
    }  
    }

    function typeText(element, text, delay = 100, callback = null) {
      if (!element) return;
      element.textContent = "";
      let i = 0;

      const interval = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(interval);
          if (callback) callback();
        }
      }, delay);
    }
function showDeviceBox() {
  const device = getDeviceType();
  const box = document.createElement("div");
  box.style = `
    position: fixed;
    bottom: 10px;
    left: 10px;
    padding: 8px 12px;
    background: rgba(0,0,0,0.7);
    color: #fff;
    border-radius: 6px;
    font-family: sans-serif;
    font-size: 13px;
    z-index: 9999;
  `;
  box.textContent = `Device type: ${device}`;
  document.body.appendChild(box);
}

function question() {
  const inputBox = document.getElementById("quer");
  const userInput = inputBox.value.trim();
  let foundElement = findElement(periodicTable, userInput);

  if (!foundElement) {
    // Try numeric estimation
    foundElement = estimateClosestByMass(userInput);
  }

  if (foundElement) {
    document.getElementById("suggestionsContainer").innerHTML = "";
    typeDocumentTitle(foundElement.name);
    objectToTable(foundElement);
  } else {
    scearch(); // Fallback to GPT
  }
}



    let H = 0;
    H = 0;
    // Global variable
    H = parseInt(localStorage.getItem("iFlag") || "0", 10);
    let q = H + 1;
  function getDeviceType() {
    const ua = navigator.userAgent;

    if (/iPad|Tablet|PlayBook|Silk|Kindle|Nexus 7|Nexus 10|SM-T/i.test(ua)) {
      return "Tablet";
    }
    if (/Mobi|Android.*Mobile|iPhone|iPod/i.test(ua)) {
      return "Phone";
    }
    return "Desktop or Laptop";
  }
    // Save input value and a flag to localStorage
    function saveBody() {
      localStorage.setItem("iFlag", H);
      console.table(H);
      localStorage.setItem("querValue", document.getElementById("quer").value);
    }

    // Restore content on DOM load
    function restoreSavedContent() {
      window.addEventListener("DOMContentLoaded", () => {
            
        const icon = document.getElementById("a");
        if (H == 0) {
          saveBody(); // Save once if not already saved
        }
        if (H > 0) {
          icon.classList.remove("fa-microphone");

          icon.classList.add("fa-search");
        }

        // Restore input value
        const input = document.getElementById("quer");
        const savedValue = localStorage.getItem("querValue");
        if (input && savedValue) {
          input.value = savedValue;
        }

        const startBtn = document.getElementById("startBtn");

        if (startBtn) {
          startBtn.onclick = () => {
            if (icon.classList.contains("fa-search")) {
              gone();
            } else if (icon.classList.contains("fa-microphone")) {
              microphone();
            }
            H = q;
            saveBody();
            // Save after button interaction
          };
        }
      });
    }

    // Call the function
    restoreSavedContent();
 showDeviceBox();
    function reattachHandlers() {
      const startBtn = document.getElementById("startBtn");

      if (startBtn) {
        startBtn.onclick = function () {
          const icon = document.getElementById("a");

          if (icon.classList.contains("fa-search")) {
            gone();
          } else if (icon.classList.contains("fa-microphone")) {
            microphone();
          } else if (icon.classList.contains("fa-stop")) {
            return;
          }

          saveValues();
          saveBody();
        };
      }

      const buttons = document.querySelectorAll("#message .suggestion-button");
      buttons.forEach((button) => {
        button.onclick = () => {
          document.getElementById("quer").value = button.textContent;
          gone();
        };
      });
    }

    window.addEventListener("DOMContentLoaded", restoreSavedContent);
  </script>

</html>
